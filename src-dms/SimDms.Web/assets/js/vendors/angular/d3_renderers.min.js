(function(){var n;n=function(n){return typeof exports=="object"&&typeof module=="object"?n(require("jquery")):typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)};n(function(n){return n.pivotUtilities.d3_renderers={Treemap:function(t,i){var u,v,y,e,r,o,s,h,p,c,l,f,w,a;for(y={localeStrings:{}},i=n.extend(y,i),o=n("<div>").css({width:"100%",height:"100%"}),h={name:"All",children:[]},u=function(n,t,i){var f,e,o,r,h,s;if(t.length===0){n.value=i;return}for(n.children==null&&(n.children=[]),o=t.shift(),s=n.children,r=0,h=s.length;r<h;r++)if(f=s[r],f.name===o){u(f,t,i);return}return e={name:o},u(e,t,i),n.children.push(e)},a=t.getRowKeys(),f=0,w=a.length;f<w;f++)s=a[f],c=t.getAggregator(s,[]).value(),c!=null&&u(h,s,c);return v=d3.scale.category10(),l=n(window).width()/1.4,e=n(window).height()/1.4,r=10,p=d3.layout.treemap().size([l,e]).sticky(!0).value(function(n){return n.size}),d3.select(o[0]).append("div").style("position","relative").style("width",l+r*2+"px").style("height",e+r*2+"px").style("left",r+"px").style("top",r+"px").datum(h).selectAll(".node").data(p.padding([15,0,0,0]).value(function(n){return n.value}).nodes).enter().append("div").attr("class","node").style("background",function(n){return n.children!=null?"lightgrey":v(n.name)}).text(function(n){return n.name}).call(function(){this.style("left",function(n){return n.x+"px"}).style("top",function(n){return n.y+"px"}).style("width",function(n){return Math.max(0,n.dx-1)+"px"}).style("height",function(n){return Math.max(0,n.dy-1)+"px"})}),o}}})}).call(this);