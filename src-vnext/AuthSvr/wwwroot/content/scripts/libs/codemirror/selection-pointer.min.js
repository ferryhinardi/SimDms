(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function r(n,t){var r=n.state.selectionPointer;(t.buttons==null?t.which:t.buttons)?r.mouseX=r.mouseY=null:(r.mouseX=t.clientX,r.mouseY=t.clientY);i(n)}function u(n,t){if(!n.getWrapperElement().contains(t.relatedTarget)){var r=n.state.selectionPointer;r.mouseX=r.mouseY=null;i(n)}}function t(n){n.state.selectionPointer.rects=null;i(n)}function i(n){n.state.selectionPointer.willUpdate||(n.state.selectionPointer.willUpdate=!0,setTimeout(function(){f(n);n.state.selectionPointer.willUpdate=!1},50))}function f(n){var t=n.state.selectionPointer,i,f,u,r,e;if(t){if(t.rects==null&&t.mouseX!=null&&(t.rects=[],n.somethingSelected()))for(i=n.display.selectionDiv.firstChild;i;i=i.nextSibling)t.rects.push(i.getBoundingClientRect());if(f=!1,t.mouseX!=null)for(u=0;u<t.rects.length;u++)r=t.rects[u],r.left<=t.mouseX&&r.right>=t.mouseX&&r.top<=t.mouseY&&r.bottom>=t.mouseY&&(f=!0);e=f?t.value:"";n.display.lineDiv.style.cursor!=e&&(n.display.lineDiv.style.cursor=e)}}n.defineOption("selectionPointer",!1,function(i,f){var e=i.state.selectionPointer;if(e&&(n.off(i.getWrapperElement(),"mousemove",e.mousemove),n.off(i.getWrapperElement(),"mouseout",e.mouseout),n.off(window,"scroll",e.windowScroll),i.off("cursorActivity",t),i.off("scroll",t),i.state.selectionPointer=null,i.display.lineDiv.style.cursor=""),f){e=i.state.selectionPointer={value:typeof f=="string"?f:"default",mousemove:function(n){r(i,n)},mouseout:function(n){u(i,n)},windowScroll:function(){t(i)},rects:null,mouseX:null,mouseY:null,willUpdate:!1};n.on(i.getWrapperElement(),"mousemove",e.mousemove);n.on(i.getWrapperElement(),"mouseout",e.mouseout);n.on(window,"scroll",e.windowScroll);i.on("cursorActivity",t);i.on("scroll",t)}})});