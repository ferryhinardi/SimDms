"use strict";angular.module("risevision.common.loading",["angularSpinner"]).value("_rvGlobalSpinnerRegistry",[]).service("$loading",["$q","$rootScope","$document","_rvGlobalSpinnerRegistry",function(n,t,i,r){function f(n){r.indexOf(n)<0&&r.push(n)}function e(n){var t;(t=r.indexOf(n))>=0&&r.splice(t,1)}var u=this;this.start=function(n){n=angular.isArray(n)?n:[n];for(var i=0;i<n.length;i++)t.$broadcast("rv-spinner:start",n[i])};this.stop=function(n){n=angular.isArray(n)?n:[n];for(var i=0;i<n.length;i++)t.$broadcast("rv-spinner:stop",n[i])};angular.element(i[0].body).append('<div rv-global-spinner class="ng-hide" style="position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 1040; "><\/div>');this.startGlobal=function(n){n=angular.isArray(n)?n:[n];angular.forEach(n,function(n){f(n)})};this.stopGlobal=function(n){n=angular.isArray(n)?n:[n];angular.forEach(n,function(n){e(n)})};this.stopSpinnerAfterPromise=function(i,r){i=angular.isArray(i)?i:[i];var u=function(){for(var n=0;n<i.length;n++)t.$broadcast("rv-spinner:stop",i[n])},f=angular.isArray(r)?n.all(r):r;f.then(function(){u()},function(){u()})};this.getDefaultSpinnerOptions=function(){return u.defaultSpinnerOptions};this.defaultSpinnerOptions={lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#555",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}}]).directive("rvGlobalSpinner",["usSpinnerService","$compile","_rvGlobalSpinnerRegistry","$timeout","$rootScope",function(n,t,i,r,u){return{scope:!0,link:function(f,e){e.prepend(t('<div ng-show="active" class="spinner-backdrop fade" ng-class="{in: active}" us-spinner="rvSpinnerOptions" spinner-key="_rv-global-spinner" ng-focus="spinnerFocused()"><\/div>')(f));f.rvSpinnerOptions={lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#555",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"};f.registry=i;f.$watchCollection("registry",function(){f.active=f.registry.length>0?!0:!1});f.$watch("active",function(n){n?e.removeClass("ng-hide"):e.addClass("ng-hide")});f.spinnerFocused=function(){u.$broadcast("rv-spinner:global:focused")};r(function(){n.spin("_rv-global-spinner")});f.active=!0}}}]).directive("rvSpinner",["usSpinnerService","$compile",function(n,t){return{scope:{backdropClass:"@rvSpinnerBackdropClass",rvSpinnerKey:"@rvSpinnerKey",rvSpinnerStartActive:"=?rvSpinnerStartActive",rvSpinnerOptions:"=rvSpinner"},link:function(i,r,u){i.active=angular.isDefined(u.rvSpinnerStartActive)&&u.rvSpinnerStartActive==="1";var f='<div ng-show="active" class="spinner-backdrop fade {{backdropClass}}" ng-class="{in: active}" us-spinner="rvSpinnerOptions" spinner-key="{{rvSpinnerKey}}"';f+=u.rvSpinnerStartActive&&u.rvSpinnerStartActive==="1"?' spinner-start-active="1"><\/div>':"><\/div>";r.prepend(t(f)(i));i.$on("rv-spinner:start",function(t,r){r===i.rvSpinnerKey&&(n.spin(r),i.active=!0)});i.$on("rv-spinner:stop",function(t,r){r===i.rvSpinnerKey&&(n.stop(r),i.active=!1)})}}}]);