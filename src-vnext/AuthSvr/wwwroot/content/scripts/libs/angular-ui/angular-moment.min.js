"format global";"deps angular";"deps moment";(function(){"use strict";function n(n,t){return n.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null,statefulFilters:!0}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,i,r,u,f){return function(e,o,s){function d(){var n,t,r;return u.serverTime?(t=(new Date).getTime(),r=t-tt+u.serverTime,n=i(r)):n=i(),n}function v(){l&&(t.clearTimeout(l),l=null)}function g(n){if(o.text(n.from(d(),a)),p&&!o.attr("title")&&o.attr("title",n.local().format(p)),!b){var r=Math.abs(d().diff(n,"minute")),i=3600;r<1?i=1:r<60?i=30:r<180&&(i=300);l=t.setTimeout(function(){g(n)},i*1e3)}}function nt(n){rt&&o.attr("datetime",n)}function c(){if(v(),h){var n=r.preprocessDate(h,w,y);g(n);nt(n.toISOString())}}var l=null,h,y=f.format,a=u.withoutSuffix,p=u.titleFormat,tt=(new Date).getTime(),w=f.preprocess,it=s.amTimeAgo.replace(/^::/,""),b=s.amTimeAgo.indexOf("::")===0,rt="TIME"===o[0].nodeName.toUpperCase(),k;k=e.$watch(it,function(n){if(typeof n=="undefined"||n===null||n===""){v();h&&(o.text(""),nt(""),h=null);return}h=n;c();n!==undefined&&b&&k()});n.isDefined(s.amWithoutSuffix)&&e.$watch(s.amWithoutSuffix,function(n){typeof n=="boolean"?(a=n,c()):a=u.withoutSuffix});s.$observe("amFormat",function(n){typeof n!="undefined"&&(y=n,c())});s.$observe("amPreprocess",function(n){w=n;c()});e.$on("$destroy",function(){v()});e.$on("amMoment:localeChanged",function(){c()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,i,r,u){this.preprocessors={utc:t.utc,unix:t.unix};this.changeLocale=function(r,u){var f=t.locale(r,u);return n.isDefined(r)&&i.$broadcast("amMoment:localeChanged"),f};this.changeTimezone=function(n){u.timezone=n;i.$broadcast("amMoment:timezoneChanged")};this.preprocessDate=function(i,f,e){return(n.isUndefined(f)&&(f=u.preprocess),this.preprocessors[f])?this.preprocessors[f](i,e):(f&&r.warn("angular-moment: Ignoring unsupported value for preprocess: "+f),!isNaN(parseFloat(i))&&isFinite(i))?t(parseInt(i,10)):t(i,e)};this.applyTimezone=function(n){var t=u.timezone;return n&&t&&(n.tz?n=n.tz(t):r.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")),n}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(n,t,i){function r(i,r){if(typeof i=="undefined"||i===null)return"";i=t.preprocessDate(i,r);var u=n(i);return u.isValid()?t.applyTimezone(u).calendar():""}return r.$stateful=i.statefulFilters,r}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(n,t,i){function r(i,r,u,f,e,o){var h,s;if(typeof i=="undefined"||i===null||(i=t.preprocessDate(i,e),h=n(i),!h.isValid()))return"";if(typeof r=="undefined"||r===null)s=n();else if(r=t.preprocessDate(r,o),s=n(r),!s.isValid())return"";return t.applyTimezone(h).diff(t.applyTimezone(s),u,f)}return r.$stateful=i.statefulFilters,r}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(n,t,i){function r(i,r,u){if(typeof i=="undefined"||i===null)return"";i=t.preprocessDate(i,u);var f=n(i);return f.isValid()?t.applyTimezone(f).format(r):""}return r.$stateful=i.statefulFilters,r}]).filter("amDurationFormat",["moment","angularMomentConfig",function(n,t){function i(t,i,r){return typeof t=="undefined"||t===null?"":n.duration(t,i).humanize(r)}return i.$stateful=t.statefulFilters,i}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(n,t,i){function r(i,r,u){if(typeof i=="undefined"||i===null)return"";i=t.preprocessDate(i,r);var f=n(i);return f.isValid()?t.applyTimezone(f).fromNow(u):""}return r.$stateful=i.statefulFilters,r}])}typeof define=="function"&&define.amd?define(["angular","moment"],n):typeof module!="undefined"&&module&&module.exports?n(angular,require("moment")):n(angular,window.moment)})();