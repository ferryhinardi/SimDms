!function(n,t){"use strict";function y(n,t){var r,i,u=n.toLowerCase();for(t=[].concat(t),r=0;r<t.length;r+=1)if((i=t[r],i)&&(i.test&&i.test(n)||i.toLowerCase()===u))return!0}var h=t.prototype.trim,c=t.prototype.trimRight,l=t.prototype.trimLeft,a=function(n){return n*1||0},r=function(n,t){if(t<1)return"";for(var i="";t>0;)t&1&&(i+=n),t>>=1,n+=n;return i},v=[].slice,f=function(n){return n==null?"\\s":n.source?n.source:"["+i.escapeRegExp(n)+"]"},e={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},o={},s,u,i;for(s in e)o[e[s]]=s;o["'"]="#39";u=function(){function i(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}var f=r,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){for(var v=1,w=n.length,c="",e,l=[],h,o,a,y,p,s=0;s<w;s++)if(c=i(n[s]),c==="string")l.push(n[s]);else if(c==="array"){if(o=n[s],o[2])for(e=r[v],h=0;h<o[2].length;h++){if(!e.hasOwnProperty(o[2][h]))throw new Error(u('[_.sprintf] property "%s" does not exist',o[2][h]));e=e[o[2][h]]}else e=o[1]?r[o[1]]:r[v++];if(/[^s]/.test(o[8])&&i(e)!="number")throw new Error(u("[_.sprintf] expecting number but found %s",i(e)));switch(o[8]){case"b":e=e.toString(2);break;case"c":e=t.fromCharCode(e);break;case"d":e=parseInt(e,10);break;case"e":e=o[7]?e.toExponential(o[7]):e.toExponential();break;case"f":e=o[7]?parseFloat(e).toFixed(o[7]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=t(e))&&o[7]?e.substring(0,o[7]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(o[8])&&o[3]&&e>=0?"+"+e:e;y=o[4]?o[4]=="0"?"0":o[4].charAt(1):" ";p=o[6]-t(e).length;a=o[6]?f(y,p):"";l.push(o[5]?e+a:a+e)}return l.join("")},n.cache={},n.parse=function(n){for(var r=n,t=[],f=[],o=0;r;){if((t=/^[^\x25]+/.exec(r))!==null)f.push(t[0]);else if((t=/^\x25{2}/.exec(r))!==null)f.push("%");else if((t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r))!==null){if(t[2]){o|=1;var e=[],u=t[2],i=[];if((i=/^([a-z_][a-z_\d]*)/i.exec(u))!==null)for(e.push(i[1]);(u=u.substring(i[0].length))!=="";)if((i=/^\.([a-z_][a-z_\d]*)/i.exec(u))!==null)e.push(i[1]);else if((i=/^\[(\d+)\]/.exec(u))!==null)e.push(i[1]);else throw new Error("[_.sprintf] huh?");else throw new Error("[_.sprintf] huh?");t[2]=e}else o|=2;if(o===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");f.push(t)}else throw new Error("[_.sprintf] huh?");r=r.substring(t[0].length)}return f},n}();i={VERSION:"2.3.0",isBlank:function(n){return n==null&&(n=""),/^\s*$/.test(n)},stripTags:function(n){return n==null?"":t(n).replace(/<\/?[^>]+>/g,"")},capitalize:function(n){return n=n==null?"":t(n),n.charAt(0).toUpperCase()+n.slice(1)},chop:function(n,i){return n==null?[]:(n=t(n),i=~~i,i>0?n.match(new RegExp(".{1,"+i+"}","g")):[n])},clean:function(n){return i.strip(n).replace(/\s+/g," ")},count:function(n,i){if(n==null||i==null)return 0;n=t(n);i=t(i);for(var u=0,r=0,f=i.length;;){if(r=n.indexOf(i,r),r===-1)break;u++;r+=f}return u},chars:function(n){return n==null?[]:t(n).split("")},swapCase:function(n){return n==null?"":t(n).replace(/\S/g,function(n){return n===n.toUpperCase()?n.toLowerCase():n.toUpperCase()})},escapeHTML:function(n){return n==null?"":t(n).replace(/[&<>"']/g,function(n){return"&"+o[n]+";"})},unescapeHTML:function(n){return n==null?"":t(n).replace(/\&([^;]+);/g,function(n,i){var r;return i in e?e[i]:(r=i.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(r[1],16)):(r=i.match(/^#(\d+)$/))?t.fromCharCode(~~r[1]):n})},escapeRegExp:function(n){return n==null?"":t(n).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(n,t,r,u){var f=i.chars(n);return f.splice(~~t,~~r,u),f.join("")},insert:function(n,t,r){return i.splice(n,t,0,r)},include:function(n,i){return i===""?!0:n==null?!1:t(n).indexOf(i)!==-1},join:function(){var t=v.call(arguments),n=t.shift();return n==null&&(n=""),t.join(n)},lines:function(n){return n==null?[]:t(n).split("\n")},reverse:function(n){return i.chars(n).reverse().join("")},startsWith:function(n,i){return i===""?!0:n==null||i==null?!1:(n=t(n),i=t(i),n.length>=i.length&&n.slice(0,i.length)===i)},endsWith:function(n,i){return i===""?!0:n==null||i==null?!1:(n=t(n),i=t(i),n.length>=i.length&&n.slice(n.length-i.length)===i)},succ:function(n){return n==null?"":(n=t(n),n.slice(0,-1)+t.fromCharCode(n.charCodeAt(n.length-1)+1))},titleize:function(n){return n==null?"":(n=t(n).toLowerCase(),n.replace(/(?:^|\s|-)\S/g,function(n){return n.toUpperCase()}))},camelize:function(n){return i.trim(n).replace(/[-_\s]+(.)?/g,function(n,t){return t?t.toUpperCase():""})},underscored:function(n){return i.trim(n).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(n){return i.trim(n).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(n){return i.titleize(t(n).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(n){return i.capitalize(i.underscored(n).replace(/_id$/,"").replace(/_/g," "))},trim:function(n,i){return n==null?"":!i&&h?h.call(n):(i=f(i),t(n).replace(new RegExp("^"+i+"+|"+i+"+$","g"),""))},ltrim:function(n,i){return n==null?"":!i&&l?l.call(n):(i=f(i),t(n).replace(new RegExp("^"+i+"+"),""))},rtrim:function(n,i){return n==null?"":!i&&c?c.call(n):(i=f(i),t(n).replace(new RegExp(i+"+$"),""))},truncate:function(n,i,r){return n==null?"":(n=t(n),r=r||"...",i=~~i,n.length>i?n.slice(0,i)+r:n)},prune:function(n,r,u){if(n==null)return"";if(n=t(n),r=~~r,u=u!=null?t(u):"...",n.length<=r)return n;var e=function(n){return n.toUpperCase()!==n.toLowerCase()?"A":" "},f=n.slice(0,r+1).replace(/.(?=\W*\w*$)/g,e);return f=f.slice(f.length-2).match(/\w\w/)?f.replace(/\s*\S+$/,""):i.rtrim(f.slice(0,f.length-1)),(f+u).length>n.length?n:n.slice(0,f.length)+u},words:function(n,t){return i.isBlank(n)?[]:i.trim(n,t).split(t||/\s+/)},pad:function(n,i,u,f){n=n==null?"":t(n);i=~~i;var e=0;u?u.length>1&&(u=u.charAt(0)):u=" ";switch(f){case"right":return e=i-n.length,n+r(u,e);case"both":return e=i-n.length,r(u,Math.ceil(e/2))+n+r(u,Math.floor(e/2));default:return e=i-n.length,r(u,e)+n}},lpad:function(n,t,r){return i.pad(n,t,r)},rpad:function(n,t,r){return i.pad(n,t,r,"right")},lrpad:function(n,t,r){return i.pad(n,t,r,"both")},sprintf:u,vsprintf:function(n,t){return t.unshift(n),u.apply(null,t)},toNumber:function(n,t){return n?(n=i.trim(n),!n.match(/^-?\d+(?:\.\d+)?$/))?NaN:a(a(n).toFixed(~~t)):0},numberFormat:function(n,t,i,r){if(isNaN(n)||n==null)return"";n=n.toFixed(~~t);r=typeof r=="string"?r:",";var u=n.split("."),f=u[0],e=u[1]?(i||".")+u[1]:"";return f.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+e},strRight:function(n,i){if(n==null)return"";n=t(n);i=i!=null?t(i):i;var r=i?n.indexOf(i):-1;return~r?n.slice(r+i.length,n.length):n},strRightBack:function(n,i){if(n==null)return"";n=t(n);i=i!=null?t(i):i;var r=i?n.lastIndexOf(i):-1;return~r?n.slice(r+i.length,n.length):n},strLeft:function(n,i){if(n==null)return"";n=t(n);i=i!=null?t(i):i;var r=i?n.indexOf(i):-1;return~r?n.slice(0,r):n},strLeftBack:function(n,t){if(n==null)return"";n+="";t=t!=null?""+t:t;var i=n.lastIndexOf(t);return~i?n.slice(0,i):n},toSentence:function(n,t,r,u){t=t||", ";r=r||" and ";var f=n.slice(),e=f.pop();return n.length>2&&u&&(r=i.rtrim(t)+r),f.length?f.join(t)+r+e:e},toSentenceSerial:function(){var n=v.call(arguments);return n[3]=!0,i.toSentence.apply(i,n)},slugify:function(n){if(n==null)return"";var r="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",u="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",e=new RegExp(f(r),"g");return n=t(n).toLowerCase().replace(e,function(n){var t=r.indexOf(n);return u.charAt(t)||"-"}),i.dasherize(n.replace(/[^\w\s-]/g,""))},surround:function(n,t){return[t,n,t].join("")},quote:function(n,t){return i.surround(n,t||'"')},unquote:function(n,t){return t=t||'"',n[0]===t&&n[n.length-1]===t?n.slice(1,n.length-1):n},exports:function(){var t={};for(var n in this)this.hasOwnProperty(n)&&!n.match(/^(?:include|contains|reverse)$/)&&(t[n]=this[n]);return t},repeat:function(n,i,u){if(n==null)return"";if(i=~~i,u==null)return r(t(n),i);for(var f=[];i>0;f[--i]=n);return f.join(u)},naturalCmp:function(n,i){var r,e,o,s,h;if(n==i)return 0;if(!n)return-1;if(!i)return 1;var c=/(\.\d+)|(\d+)|(\D+)/g,u=t(n).toLowerCase().match(c),f=t(i).toLowerCase().match(c),l=Math.min(u.length,f.length);for(r=0;r<l;r++)if(e=u[r],o=f[r],e!==o)return(s=parseInt(e,10),!isNaN(s)&&(h=parseInt(o,10),!isNaN(h)&&s-h))?s-h:e<o?-1:1;return u.length===f.length?u.length-f.length:n<i?-1:1},levenshtein:function(n,i){var u,e,o,f,r;if(n==null&&i==null)return 0;if(n==null)return t(i).length;if(i==null)return t(n).length;for(n=t(n),i=t(i),u=[],f=0;f<=i.length;f++)for(r=0;r<=n.length;r++)o=f&&r?n.charAt(r-1)===i.charAt(f-1)?e:Math.min(u[r],u[r-1],e)+1:f+r,e=u[r],u[r]=o;return u.pop()},toBoolean:function(n,t,r){return(typeof n=="number"&&(n=""+n),typeof n!="string")?!!n:(n=i.trim(n),y(n,t||["true","1"]))?!0:y(n,r||["false","0"])?!1:void 0}};i.strip=i.trim;i.lstrip=i.ltrim;i.rstrip=i.rtrim;i.center=i.lrpad;i.rjust=i.lpad;i.ljust=i.rpad;i.contains=i.include;i.q=i.quote;i.toBool=i.toBoolean;typeof exports!="undefined"&&(typeof module!="undefined"&&module.exports&&(module.exports=i),exports._s=i);typeof define=="function"&&define.amd&&define("underscore.string",[],function(){return i});n._=n._||{};n._.string=n._.str=i}(this,String);