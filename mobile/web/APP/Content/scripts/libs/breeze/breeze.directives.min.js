(function(){"use strict";function n(){return{restrict:"A",require:"ngModel",link:function(n,t,i,r){function u(n){var t=r.$viewValue;return+t==+n?t:n}i.type!=="radio"&&i.type!=="checkbox"&&r.$formatters.push(u)}}}function t(n,t){function i(i,r,u){function h(){function s(n){e.setCustomValidity&&e.setCustomValidity(n||"");var i=n?u.replace(/%error%/,n):"",r=f.getIsRequired(),s=r?o:"";t.innerHTML=r||!!i?s+i:""}var u=n.zValidateTemplate,o=n.zRequiredTemplate||"",t=angular.element('<span class="z-decorator"><\/span>');r.after(t);t=t[0];i.$watch(f.getValErrs,s)}function c(){function n(n){var t=n?n:"";i.z_error=t;i.z_invalid=!!t;i.z_required=f.getIsRequired()}i.$watch(f.getValErrs,n)}var f=t.create(i,u.ngModel||u.kNgModel,u.zValidate);if(f.getValErrs){var e=r[0],o=e.nodeName,s=o=="INPUT"||o=="SELECT"||o=="TEXTAREA";s?h():c()}}return{link:i,restrict:"A",scope:!0}}function i(){function n(n,t,f){(t||f)&&(this.scope=n,s(this,t,f),this.getEntityAspect=this.entityPath?u(this):r(this),this.getValErrs=i(this),this.isRequired=undefined)}function t(t,i,r){return new n(t,i,r)}function i(n){return function(){var i=n.getEntityAspect(),t;return i?(t=i.getValidationErrors(n.propertyPath),t.length)?t.map(function(n){return n.errorMessage}).join("; "):"":null}}function r(n){return function(){return n.scope.entityAspect}}function u(n){return function(){try{return n.scope.$eval(n.entityPath).entityAspect}catch(t){return undefined}}}function f(){var n=this,t,i;return n.isRequired!==undefined?n.isRequired:(t=n.getType(),t)?(i=o(t),n.isRequired=!!i[n.propertyPath]):undefined}function e(){var n=this.getEntityAspect();return n?n.entity.entityType:null}function o(n){var t,i;return n.custom&&n.custom.required?n.custom.required:(n.custom||(n.custom={}),t={},n.custom.required=t,i=n.getProperties(),i.forEach(function(n){for(var i,r=n.validators,u=r.length;u--;)if(i=r[u],i.context.isRequired||i.name==="required"){t[n.name]=!0;break}}),t)}function s(n,t,i){function e(n){n[n.length-1]==="]"?s(n):o(n)}function o(t){r=t.split(".");n.propertyPath=r.pop();n.entityPath=r.join(".")}function s(t){var u=t.lastIndexOf("["),i,r;n.entityPath=t.substring(0,u);i=t.substring(u+1,t.length-1);try{r=n.scope.$eval(i)}catch(f){}n.propertyPath=r?r:i}if(t&&e(t),i){var r=i.split(","),u=r.pop(),f=r.pop();f&&(n.entityPath=f.trim());n.entityPath?n.propertyPath=u:e(u)}}return n.prototype={constructor:n,getIsRequired:f,getType:e},{create:t}}function r(){this.zValidateTemplate='<span class="invalid">%error%<\/span>';this.zRequiredTemplate='<span class="icon-asterisk-invalid z-required" title="Required">*<\/span>';this.$get=function(){return{zValidateTemplate:this.zValidateTemplate,zRequiredTemplate:this.zRequiredTemplate}}}var u=angular.module("breeze.directives",[]).directive("zFloat",[n]).directive("zValidate",["zDirectivesConfig","zValidateInfo",t]).service("zValidateInfo",i).provider("zDirectivesConfig",r)})();