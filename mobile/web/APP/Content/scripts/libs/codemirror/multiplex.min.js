(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.multiplexingMode=function(t){function u(n,t,i){if(typeof t=="string")return n.indexOf(t,i);var r=t.exec(i?n.slice(i):n);return r?r.index+i:-1}var i=Array.prototype.slice.call(arguments,1),r=i.length;return{startState:function(){return{outer:n.startState(t),innerActive:null,inner:null}},copyState:function(i){return{outer:n.copyState(t,i.outer),innerActive:i.innerActive,inner:i.innerActive&&n.copyState(i.innerActive.mode,i.inner)}},token:function(f,e){var c,v,l,y,s,h,o,a;if(e.innerActive)return(s=e.innerActive,h=f.string,!s.close&&f.sol())?(e.innerActive=e.inner=null,this.token(f,e)):(o=s.close?u(h,s.close,f.pos):-1,o==f.pos)?(f.match(s.close),e.innerActive=e.inner=null,s.delimStyle):(o>-1&&(f.string=h.slice(0,o)),a=s.mode.token(f,e.inner),o>-1&&(f.string=h),s.innerStyle&&(a=a?a+" "+s.innerStyle:s.innerStyle),a);for(c=Infinity,h=f.string,v=0;v<r;++v){if(l=i[v],o=u(h,l.open,f.pos),o==f.pos)return f.match(l.open),e.innerActive=l,e.inner=n.startState(l.mode,t.indent?t.indent(e.outer,""):0),l.delimStyle;o!=-1&&o<c&&(c=o)}return c!=Infinity&&(f.string=h.slice(0,c)),y=t.token(f,e.outer),c!=Infinity&&(f.string=h),y},indent:function(i,r){var u=i.innerActive?i.innerActive.mode:t;return u.indent?u.indent(i.innerActive?i.inner:i.outer,r):n.Pass},blankLine:function(u){var f=u.innerActive?u.innerActive.mode:t,e,o;if(f.blankLine&&f.blankLine(u.innerActive?u.inner:u.outer),u.innerActive)u.innerActive.close==="\n"&&(u.innerActive=u.inner=null);else for(e=0;e<r;++e)o=i[e],o.open==="\n"&&(u.innerActive=o,u.inner=n.startState(o.mode,f.indent?f.indent(u.outer,""):0))},electricChars:t.electricChars,innerMode:function(n){return n.inner?{state:n.inner,mode:n.innerActive.mode}:{state:n.outer,mode:t}}}}});