(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function t(n){for(var i,t=n.display.lineSpace.childNodes.length-1;t>=0;t--)i=n.display.lineSpace.childNodes[t],/(^|\s)CodeMirror-ruler($|\s)/.test(i.className)&&i.parentNode.removeChild(i)}function i(t){for(var r,e,o,i,f=t.getOption("rulers"),s=t.defaultCharWidth(),h=t.charCoords(n.Pos(t.firstLine(),0),"div").left,c=t.display.scroller.offsetHeight+30,u=0;u<f.length;u++)r=document.createElement("div"),r.className="CodeMirror-ruler",o=null,i=f[u],typeof i=="number"?e=i:(e=i.column,i.className&&(r.className+=" "+i.className),i.color&&(r.style.borderColor=i.color),i.lineStyle&&(r.style.borderLeftStyle=i.lineStyle),i.width&&(r.style.borderLeftWidth=i.width),o=f[u].className),r.style.left=h+e*s+"px",r.style.top="-50px",r.style.bottom="-20px",r.style.minHeight=c+"px",t.display.lineSpace.insertBefore(r,t.display.cursorDiv)}function r(n){t(n);i(n)}n.defineOption("rulers",!1,function(u,f,e){if(e&&e!=n.Init&&(t(u),u.off("refresh",r)),f&&f.length){i(u);u.on("refresh",r)}})});