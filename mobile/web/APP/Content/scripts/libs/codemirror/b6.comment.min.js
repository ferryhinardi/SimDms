(function(n){if(typeof exports=="object"&&typeof module=="object")return n(exports);if(typeof define=="function"&&define.amd)return define(["exports"],n);n(tern.comment||(tern.comment={}))})(function(n){function t(n){return n<14&&n>8||n===32||n===160}function i(n,i){for(;i>0;--i){var r=n.charCodeAt(i-1);if(r==10)break;if(!t(r))return!1}return!0}n.commentsBefore=function(n,r){var e=null,o=0,h,f,s,c,u;n:while(r>0)if(f=n.charCodeAt(r-1),f==10)for(u=--r,s=!1;u>0;--u)if(f=n.charCodeAt(u-1),f==47&&n.charCodeAt(u-2)==47){if(!i(n,u-2))break n;c=n.slice(u,r);!o&&h?e[0]=c+"\n"+e[0]:(e||(e=[])).unshift(c);h=!0;o=0;r=u-2;break}else if(f==10){if(!s&&++o>1)break n;break}else s||t(f)||(s=!0);else if(f==47&&n.charCodeAt(r-2)==42){for(u=r-2;u>1;--u)if(n.charCodeAt(u-1)==42&&n.charCodeAt(u-2)==47){if(!i(n,u-2))break n;(e||(e=[])).unshift(n.slice(u,r-2));h=!1;o=0;break}r=u-2}else if(t(f))--r;else break;return e};n.commentAfter=function(n,i){for(var u,f,r;i<n.length;){if(u=n.charCodeAt(i),u==47){if(f=n.charCodeAt(i+1),f==47)r=n.indexOf("\n",i+2);else if(f==42)r=n.indexOf("*/",i+2);else return;return n.slice(i+2,r<0?n.length:r)}t(u)&&++i}};n.ensureCommentsBefore=function(t,i){return i.hasOwnProperty("commentsBefore")?i.commentsBefore:i.commentsBefore=n.commentsBefore(t,i.start)}});