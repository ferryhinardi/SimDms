(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";var t=/^(\s*)(>[> ]*|[*+-]\s|(\d+)\.)(\s*)/,i=/^(\s*)(>[> ]*|[*+-]|(\d+)\.)(\s*)$/,r=/[*+-]\s/;n.commands.newlineAndIndentContinueMarkdownList=function(u){var s,h,f;if(u.getOption("disableInput"))return n.Pass;for(s=u.listSelections(),h=[],f=0;f<s.length;f++){var o=s[f].head,e,c=u.getStateAfter(o.line),l=c.list!==!1,a=c.quote!==!1;if(!s[f].empty()||!l&&!a||!(e=u.getLine(o.line).match(t))){u.execCommand("newlineAndIndent");return}if(u.getLine(o.line).match(i))u.replaceRange("",{line:o.line,ch:0},{line:o.line,ch:o.ch+1}),h[f]="\n";else{var v=e[1],y=e[4],p=r.test(e[2])||e[2].indexOf(">")>=0?e[2]:parseInt(e[3],10)+1+".";h[f]="\n"+v+p+y}}u.replaceSelections(h)}});