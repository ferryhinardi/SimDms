(function(){function n(t,i){function o(){return r=t.charAt(++e),r||""}function s(n){var i=e;return n&&h(),result=t.charAt(e+1)||"",e=i-1,o(),result}function k(n){for(var i=e;o();)if(r==="\\")o();else if(n.indexOf(r)!==-1)break;else if(r==="\n")break;return t.substring(i,e+1)}function lt(n){var t=e,i=k(n);return e=t-1,o(),i}function h(){for(var n="";b.test(s());)o(),n+=r;return n}function at(){var n="";for(r&&b.test(r)&&(n=r);b.test(o());)n+=r;return n}function rt(n){var i=e;for(n=s()==="/",o();o();)if(n||r!=="*"||s()!=="/"){if(n&&r==="\n")return t.substring(i,e)}else{o();break}return t.substring(i,e)+r}function nt(n){return t.substring(e-n.length,e).toLowerCase()===n}function vt(){for(var n,i=e+1;i<t.length;i++){if(n=t.charAt(i),n==="{")return!0;if(n===";"||n==="}"||n===")")return!1}return!1}function pt(){a++;c+=yt}function wt(){a--;c=c.slice(0,-v)}var u,f,ot,l,tt;i=i||{};var v=i.indent_size||4,st=i.indent_char||" ",ht=i.selector_separator_newline===undefined?!0:i.selector_separator_newline,ct=i.end_with_newline===undefined?!1:i.end_with_newline,it=i.newline_between_rules===undefined?!0:i.newline_between_rules;typeof v=="string"&&(v=parseInt(v,10));var b=/^\s+$/,e=-1,r,g=0;var c=t.match(/^[\t ]*/)[0],yt=new Array(v+1).join(st),a=0,y=0;u={};u["{"]=function(n){u.singleSpace();f.push(n);u.newLine()};u["}"]=function(n){u.newLine();f.push(n);u.newLine()};u._lastCharWhitespace=function(){return b.test(f[f.length-1])};u.newLine=function(n){n||u.trim();f.length&&f.push("\n");c&&f.push(c)};u.singleSpace=function(){f.length&&!u._lastCharWhitespace()&&f.push(" ")};u.trim=function(){while(u._lastCharWhitespace())f.pop()};f=[];c&&f.push(c);for(var p=!1,d=!1,ut="",ft="";;){var et=at(),w=et!=="",bt=et.indexOf("\n")!==-1;if(ft=ut,ut=r,r)r==="/"&&s()==="*"?(ot=nt(""),u.newLine(),f.push(rt()),u.newLine(),ot&&u.newLine(!0)):r==="/"&&s()==="/"?(bt||ft==="{"||u.trim(),u.singleSpace(),f.push(rt()),u.newLine()):r==="@"?(w&&u.singleSpace(),f.push(r),l=lt(": ,;{}()[]/='\"").replace(/\s$/,""),l in n.NESTED_AT_RULE?(y+=1,l in n.CONDITIONAL_GROUP_RULE&&(d=!0)):": ".indexOf(l[l.length-1])>=0&&(o(),l=k(": ").replace(/\s$/,""),f.push(l),u.singleSpace())):r==="{"?s(!0)==="}"?(h(),o(),u.singleSpace(),f.push("{}"),u.newLine(),it&&a===0&&u.newLine(!0)):(pt(),u["{"](r),d?(d=!1,p=a>y):p=a>=y):r==="}"?(wt(),u["}"](r),p=!1,y&&y--,it&&a===0&&u.newLine(!0)):r===":"?(h(),!(p||d)||nt("&")||vt()?s()===":"?(o(),f.push("::")):f.push(":"):(f.push(":"),u.singleSpace())):r==='"'||r==="'"?(w&&u.singleSpace(),f.push(k(r))):r===";"?(f.push(r),u.newLine()):r==="("?nt("url")?(f.push(r),h(),o()&&(r!==")"&&r!=='"'&&r!=="'"?f.push(k(")")):e--)):(g++,w&&u.singleSpace(),f.push(r),h()):r===")"?(f.push(r),g--):r===","?(f.push(r),h(),!p&&ht&&g<1?u.newLine():u.singleSpace()):r==="]"?f.push(r):r==="["?(w&&u.singleSpace(),f.push(r)):r==="="?(h(),r="=",f.push(r)):(w&&u.singleSpace(),f.push(r));else break}return tt=f.join("").replace(/[\r\n\t ]+$/,""),ct&&(tt+="\n"),tt}n.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0};n.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0};typeof define=="function"&&define.amd?define([],function(){return{css_beautify:n}}):typeof exports!="undefined"?exports.css_beautify=n:typeof window!="undefined"?window.css_beautify=n:typeof global!="undefined"&&(global.css_beautify=n)})();