"use strict";function uiCodemirrorDirective(n,t){function i(n,i,o,s){var c=angular.extend({value:i.text()},t.codemirror||{},n.$eval(o.uiCodemirror),n.$eval(o.uiCodemirrorOpts)),h=r(i,c);if(u(h,o.uiCodemirror||o.uiCodemirrorOpts,n),f(h,s,n),e(h,o.uiRefresh,n),n.$on("CodeMirror",function(n,t){if(angular.isFunction(t))t(h);else throw new Error("the CodeMirror event requires a callback function");}),angular.isFunction(c.onLoad))c.onLoad(h)}function r(n,t){var i;return n[0].tagName==="TEXTAREA"?i=window.CodeMirror.fromTextArea(n[0],t):(n.html(""),i=new window.CodeMirror(function(t){n.append(t)},t)),i}function u(n,t,i){function u(t,i){angular.isObject(t)&&r.forEach(function(r){if(t.hasOwnProperty(r)){if(i&&t[r]===i[r])return;n.setOption(r,t[r])}})}if(t){var r=Object.keys(window.CodeMirror.defaults);i.$watch(t,u,!0)}}function f(n,t,i){if(t){t.$formatters.push(function(n){if(angular.isUndefined(n)||n===null)return"";if(angular.isObject(n)||angular.isArray(n))throw new Error("ui-codemirror cannot use an object or an array as a model");return n});t.$render=function(){var i=t.$viewValue||"";n.setValue(i)};n.on("change",function(n){var r=n.getValue();r!==t.$viewValue&&i.$evalAsync(function(){t.$setViewValue(r)})})}}function e(t,i,r){i&&r.$watch(i,function(i,r){i!==r&&n(function(){t.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror need CodeMirror to work... (o rly?)");return i}}}angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective);