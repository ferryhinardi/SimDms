/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
(function(n,t){"use strict";var i;if(typeof exports=="object"){try{i=require("moment")}catch(r){}module.exports=t(i)}else typeof define=="function"&&define.amd?define(function(n){try{i=n("moment")}catch(r){}return t(i)}):n.Pikaday=t(n.moment)})(this,function(n){"use strict";var e=typeof n=="function",c=!!window.addEventListener,t=window.document,s=window.setTimeout,u=function(n,t,i,r){c?n.addEventListener(t,i,!!r):n.attachEvent("on"+t,i)},f=function(n,t,i,r){c?n.removeEventListener(t,i,!!r):n.detachEvent("on"+t,i)},a=function(n,i,r){var u;t.createEvent?(u=t.createEvent("HTMLEvents"),u.initEvent(i,!0,!1),u=o(u,r),n.dispatchEvent(u)):t.createEventObject&&(u=t.createEventObject(),u=o(u,r),n.fireEvent("on"+i,u))},k=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},r=function(n,t){return(" "+n.className+" ").indexOf(" "+t+" ")!==-1},d=function(n,t){r(n,t)||(n.className=n.className===""?t:n.className+" "+t)},g=function(n,t){n.className=k((" "+n.className+" ").replace(" "+t+" "," "))},l=function(n){return/Array/.test(Object.prototype.toString.call(n))},i=function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())},nt=function(n){var t=n.getDay();return t===0||t===6},tt=function(n){return n%4==0&&n%100!=0||n%400==0},it=function(n,t){return[31,tt(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},h=function(n){i(n)&&n.setHours(0,0,0,0)},v=function(n,t){return n.getTime()===t.getTime()},o=function(n,t,r){var u,f;for(u in t)f=n[u]!==undefined,f&&typeof t[u]=="object"&&t[u]!==null&&t[u].nodeName===undefined?i(t[u])?r&&(n[u]=new Date(t[u].getTime())):l(t[u])?r&&(n[u]=t[u].slice(0)):n[u]=o({},t[u],r):(r||!f)&&(n[u]=t[u]);return n},y=function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),n.month>11&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n},p={field:null,bound:undefined,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function(n,t,i){for(t+=n.firstDay;t>=7;)t-=7;return i?n.i18n.weekdaysShort[t]:n.i18n.weekdays[t]},rt=function(n,t,i,r,u,f,e){if(e)return'<td class="is-empty"><\/td>';var o=[];return f&&o.push("is-disabled"),u&&o.push("is-today"),r&&o.push("is-selected"),'<td data-day="'+n+'" class="'+o.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+i+'" data-pika-month="'+t+'" data-pika-day="'+n+'">'+n+"<\/button><\/td>"},ut=function(n,t,i){var r=new Date(i,0,1),u=Math.ceil(((new Date(i,t,n)-r)/864e5+r.getDay()+1)/7);return'<td class="pika-week">'+u+"<\/td>"},ft=function(n,t){return"<tr>"+(t?n.reverse():n).join("")+"<\/tr>"},et=function(n){return"<tbody>"+n.join("")+"<\/tbody>"},ot=function(n){var t,i=[];for(n.showWeekNumber&&i.push("<th><\/th>"),t=0;t<7;t++)i.push('<th scope="col"><abbr title="'+w(n,t)+'">'+w(n,t,!0)+"<\/abbr><\/th>");return"<thead>"+(n.isRTL?i.reverse():i).join("")+"<\/thead>"},st=function(n,t,i,r,u){for(var h,f=n._o,v=i===f.minYear,y=i===f.maxYear,s='<div class="pika-title">',c,a,p=!0,w=!0,o=[],e=0;e<12;e++)o.push('<option value="'+(i===u?e-t:12+e-t)+'"'+(e===r?" selected":"")+(v&&e<f.minMonth||y&&e>f.maxMonth?"disabled":"")+">"+f.i18n.months[e]+"<\/option>");for(c='<div class="pika-label">'+f.i18n.months[r]+'<select class="pika-select pika-select-month">'+o.join("")+"<\/select><\/div>",l(f.yearRange)?(e=f.yearRange[0],h=f.yearRange[1]+1):(e=i-f.yearRange,h=1+i+f.yearRange),o=[];e<h&&e<=f.maxYear;e++)e>=f.minYear&&o.push('<option value="'+e+'"'+(e===i?" selected":"")+">"+e+"<\/option>");return a='<div class="pika-label">'+i+f.yearSuffix+'<select class="pika-select pika-select-year">'+o.join("")+"<\/select><\/div>",s+=f.showMonthAfterYear?a+c:c+a,v&&(r===0||f.minMonth>=r)&&(p=!1),y&&(r===11||f.maxMonth<=r)&&(w=!1),t===0&&(s+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+f.i18n.previousMonth+"<\/button>"),t===n._o.numberOfMonths-1&&(s+='<button class="pika-next'+(w?"":" is-disabled")+'" type="button">'+f.i18n.nextMonth+"<\/button>"),s+"<\/div>"},ht=function(n,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+ot(n)+et(t)+"<\/table>"},b=function(f){var o=this,h=o.config(f),l;o._onMouseDown=function(n){if(o._v){n=n||window.event;var t=n.target||n.srcElement;if(t){if(!r(t,"is-disabled")){if(r(t,"pika-button")&&!r(t,"is-empty")){o.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day")));h.bound&&s(function(){o.hide();h.field&&h.field.blur()},100);return}r(t,"pika-prev")?o.prevMonth():r(t,"pika-next")&&o.nextMonth()}if(r(t,"pika-select"))o._c=!0;else if(n.preventDefault)n.preventDefault();else return n.returnValue=!1,!1}}};o._onChange=function(n){n=n||window.event;var t=n.target||n.srcElement;t&&(r(t,"pika-select-month")?o.gotoMonth(t.value):r(t,"pika-select-year")&&o.gotoYear(t.value))};o._onInputChange=function(t){var r;t.firedBy!==o&&(e?(r=n(h.field.value,h.format),r=r&&r.isValid()?r.toDate():null):r=new Date(Date.parse(h.field.value)),o.setDate(i(r)?r:null),o._v||o.show())};o._onInputFocus=function(){o.show()};o._onInputClick=function(){o.show()};o._onInputBlur=function(){var n=t.activeElement;do if(r(n,"pika-single"))return;while(n=n.parentNode);o._c||(o._b=s(function(){o.hide()},50));o._c=!1};o._onClick=function(n){n=n||window.event;var t=n.target||n.srcElement,i=t;if(t){!c&&r(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),u(t,"change",o._onChange)));do if(r(i,"pika-single")||i===h.trigger)return;while(i=i.parentNode);o._v&&t!==h.trigger&&i!==h.trigger&&o.hide()}};o.el=t.createElement("div");o.el.className="pika-single"+(h.isRTL?" is-rtl":"");u(o.el,"mousedown",o._onMouseDown,!0);u(o.el,"change",o._onChange);h.field&&(h.container?h.container.appendChild(o.el):h.bound?t.body.appendChild(o.el):h.field.parentNode.insertBefore(o.el,h.field.nextSibling),u(h.field,"change",o._onInputChange),h.defaultDate||(h.defaultDate=e&&h.field.value?n(h.field.value,h.format).toDate():new Date(Date.parse(h.field.value)),h.setDefaultDate=!0));l=h.defaultDate;i(l)?h.setDefaultDate?o.setDate(l,!0):o.gotoDate(l):o.gotoDate(new Date);h.bound?(this.hide(),o.el.className+=" is-bound",u(h.trigger,"click",o._onInputClick),u(h.trigger,"focus",o._onInputFocus),u(h.trigger,"blur",o._onInputBlur)):this.show()};return b.prototype={config:function(n){var t,r,u;return this._o||(this._o=o({},p,!0)),t=o(this._o,n,!0),t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.bound=!!(t.bound!==undefined?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn=typeof t.disableDayFn=="function"?t.disableDayFn:null,r=parseInt(t.numberOfMonths,10)||1,t.numberOfMonths=r>4?4:r,i(t.minDate)||(t.minDate=!1),i(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&(h(t.minDate),t.minYear=t.minDate.getFullYear(),t.minMonth=t.minDate.getMonth()),t.maxDate&&(h(t.maxDate),t.maxYear=t.maxDate.getFullYear(),t.maxMonth=t.maxDate.getMonth()),l(t.yearRange)?(u=(new Date).getFullYear()-10,t.yearRange[0]=parseInt(t.yearRange[0],10)||u,t.yearRange[1]=parseInt(t.yearRange[1],10)||u):(t.yearRange=Math.abs(parseInt(t.yearRange,10))||p.yearRange,t.yearRange>100&&(t.yearRange=100)),t},toString:function(t){return i(this._d)?e?n(this._d).format(t||this._o.format):this._d.toDateString():""},getMoment:function(){return e?n(this._d):null},setMoment:function(t,i){e&&n.isMoment(t)&&this.setDate(t.toDate(),i)},getDate:function(){return i(this._d)?new Date(this._d.getTime()):null},setDate:function(n,t){if(!n)return this._d=null,this._o.field&&(this._o.field.value="",a(this._o.field,"change",{firedBy:this})),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),i(n)){var r=this._o.minDate,u=this._o.maxDate;i(r)&&n<r?n=r:i(u)&&n>u&&(n=u);this._d=new Date(n.getTime());h(this._d);this.gotoDate(this._d);this._o.field&&(this._o.field.value=this.toString(),a(this._o.field,"change",{firedBy:this}));t||typeof this._o.onSelect!="function"||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(n){var r=!0;if(i(n)){if(this.calendars){var f=new Date(this.calendars[0].year,this.calendars[0].month,1),t=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),u=n.getTime();t.setMonth(t.getMonth()+1);t.setDate(t.getDate()-1);r=u<f.getTime()||t.getTime()<u}r&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths));this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=y(this.calendars[0]);for(var n=1;n<this._o.numberOfMonths;n++)this.calendars[n]=y({month:this.calendars[0].month+n,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())},setMinDate:function(n){this._o.minDate=n},setMaxDate:function(n){this._o.maxDate=n},draw:function(n){var i,f;if(this._v||n){var t=this._o,e=t.minYear,o=t.maxYear,r=t.minMonth,u=t.maxMonth,h="";for(this._y<=e&&(this._y=e,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=o&&(this._y=o,!isNaN(u)&&this._m>u&&(this._m=u)),i=0;i<t.numberOfMonths;i++)h+='<div class="pika-lendar">'+st(this,i,this.calendars[i].year,this.calendars[i].month,this.calendars[0].year)+this.render(this.calendars[i].year,this.calendars[i].month)+"<\/div>";this.el.innerHTML=h;t.bound&&t.field.type!=="hidden"&&s(function(){t.trigger.focus()},1);typeof this._o.onDraw=="function"&&(f=this,s(function(){f._o.onDraw.call(f)},0))}},adjustPosition:function(){if(!this._o.container){var r=this._o.trigger,u=r,f=this.el.offsetWidth,e=this.el.offsetHeight,s=window.innerWidth||t.documentElement.clientWidth,h=window.innerHeight||t.documentElement.clientHeight,c=window.pageYOffset||t.body.scrollTop||t.documentElement.scrollTop,n,i,o;if(typeof r.getBoundingClientRect=="function")o=r.getBoundingClientRect(),n=o.left+window.pageXOffset,i=o.bottom+window.pageYOffset;else for(n=u.offsetLeft,i=u.offsetTop+u.offsetHeight;u=u.offsetParent;)n+=u.offsetLeft,i+=u.offsetTop;(this._o.reposition&&n+f>s||this._o.position.indexOf("right")>-1&&n-f+r.offsetWidth>0)&&(n=n-f+r.offsetWidth);(this._o.reposition&&i+e>h+c||this._o.position.indexOf("top")>-1&&i-e-r.offsetHeight>0)&&(i=i-e-r.offsetHeight);this.el.style.cssText=["position: absolute","left: "+n+"px","top: "+i+"px"].join(";")}},render:function(n,t){var r=this._o,a=new Date,y=it(n,t),u=new Date(n,t,1).getDay(),p=[],o=[],s,c,f,l;for(h(a),r.firstDay>0&&(u-=r.firstDay,u<0&&(u+=7)),s=y+u,c=s;c>7;)c-=7;for(s+=7-c,f=0,l=0;f<s;f++){var e=new Date(n,t,1+(f-u)),w=i(this._d)?v(e,this._d):!1,b=v(e,a),k=f<u||f>=y+u,d=r.minDate&&e<r.minDate||r.maxDate&&e>r.maxDate||r.disableWeekends&&nt(e)||r.disableDayFn&&r.disableDayFn(e);o.push(rt(1+(f-u),t,n,w,b,d,k));++l==7&&(r.showWeekNumber&&o.unshift(ut(f-u,t,n)),p.push(ft(o,r.isRTL)),o=[],l=0)}return ht(r,p)},isVisible:function(){return this._v},show:function(){this._v||(g(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(u(t,"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){var n=this._v;n!==!1&&(this._o.bound&&f(t,"click",this._onClick),this.el.style.cssText="",d(this.el,"is-hidden"),this._v=!1,n!==undefined&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){this.hide();f(this.el,"mousedown",this._onMouseDown,!0);f(this.el,"change",this._onChange);this._o.field&&(f(this._o.field,"change",this._onInputChange),this._o.bound&&(f(this._o.trigger,"click",this._onInputClick),f(this._o.trigger,"focus",this._onInputFocus),f(this._o.trigger,"blur",this._onInputBlur)));this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},b});